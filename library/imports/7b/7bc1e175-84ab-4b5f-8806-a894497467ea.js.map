{
  "version": 3,
  "sources": [
    "unknown"
  ],
  "names": [],
  "mappings": "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",
  "file": "unknown",
  "sourcesContent": [
    "var Direction = cc.Enum({\r\n    NONE: 0,\r\n    LEFT: 1,\r\n    RIGHT: 2\r\n});\r\nvar moveDirection = Direction.NONE;\r\nvar game;\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        \r\n        //最大速度\r\n        maxMoveSpeed:10, \r\n        //加速度 \r\n        accel:0,\r\n        //动画\r\n        animate:cc.Animation,\r\n        //阻力\r\n        drag:0,\r\n        //重力\r\n        gravity:0,\r\n        //起跳初速度\r\n        jumpVelocity:0,\r\n        \r\n    },\r\n\r\n    init(game) {\r\n        this.game = game;\r\n    },\r\n    \r\n    // use this for initialization\r\n    onLoad: function () {\r\n        //console.log(\"onLoad player\");\r\n        //初始速度为0\r\n        this.xspeed = 0;\r\n        this.yspeed = 0;\r\n        this.jumping = false;\r\n        \r\n        //键盘输入，后续会改为重力感应（左右方向）\r\n        this.setInputControl();\r\n       \r\n        //激活节点（激活碰撞检测）\r\n        //this.node.active = true;\r\n        \r\n    },\r\n    \r\n    //键盘输入，后续会改为重力感应（左右方向）\r\n    setInputControl:function(){\r\n        \r\n        cc.inputManager.setAccelerometerEnabled(true);\r\n        var self = this;\r\n        cc.eventManager.addListener({\r\n            event:cc.EventListener.KEYBOARD, \r\n            //键盘回调函数\r\n            onKeyPressed: function(keyCode,event){\r\n                switch(keyCode){\r\n                    case cc.KEY.d:\r\n                    case cc.KEY.right:\r\n                        //事件回调\r\n                        self.turnRigth();\r\n                        break;\r\n                    case cc.KEY.a:\r\n                    case cc.KEY.left:\r\n                        self.turnLeft();\r\n                        break;\r\n                    case cc.KEY.w:\r\n                    case cc.KEY.up:\r\n                        if(!self.jumping){\r\n                            self.jumping = true;\r\n                            self.jump();\r\n                        }\r\n                        break;\r\n                    default:\r\n                        moveDirection = Direction.NONE;\r\n                        break;\r\n                }\r\n            },\r\n            onKeyReleased: function(keyCode,event){\r\n                if(keyCode == cc.KEY.right||keyCode == cc.KEY.d){\r\n                   moveDirection = Direction.NONE;\r\n                   \r\n                }\r\n                else if(keyCode == cc.KEY.left||keyCode == cc.KEY.a){\r\n                     moveDirection = Direction.NONE;\r\n                }\r\n            }\r\n        },self.node);\r\n    },\r\n    \r\n    //跳跃\r\n    jump: function() {\r\n        this.yspeed = this.jumpVelocity;\r\n        cc.log('jumping');\r\n    },\r\n    \r\n    //键盘回调函数\r\n    turnLeft:function(){\r\n        //播放奔跑动画\r\n        this.animate.play('hero-run');\r\n        //修改运动方向\r\n        this.node.scaleX = 1;\r\n        //设置moveDirection变量\r\n        moveDirection = Direction.LEFT;\r\n    },\r\n    turnRigth:function(){\r\n        this.animate.play('hero-run');\r\n        this.node.scaleX = -1; \r\n        moveDirection = Direction.RIGHT;\r\n    },\r\n    \r\n    //碰撞检测\r\n   // onCollisionEnter: function() {\r\n        //cc.director.pause();\r\n        //this.game.getComponent('Game').gameOver();\r\n    //},\r\n    \r\n    update: function(dt){\r\n        \r\n        //向右运动\r\n        if(moveDirection == Direction.RIGHT){\r\n            //console.log('turn right');\r\n            //初速度大小增加\r\n            this.xspeed +=this.accel * dt;\r\n        }\r\n        //向左运动\r\n        else if(moveDirection == Direction.LEFT){\r\n            //console.log('turn left');\r\n            this.xspeed -=this.accel * dt;\r\n        }\r\n        //阻力作用\r\n        else{\r\n            if(this.xspeed > 0){\r\n                this.xspeed -= this.drag * dt;\r\n                if(this.xspeed <= 0){\r\n                    this.xspeed = 0;\r\n                    this.animate.pause('hero-run');\r\n                }\r\n            }\r\n            else{\r\n                this.xspeed += this.drag * dt;\r\n                if(this.xspeed >= 0){\r\n                    this.xspeed = 0;\r\n                    this.animate.pause('hero-run');\r\n                }\r\n            }\r\n        }\r\n        \r\n        //跳跃\r\n        if(this.jumping){\r\n            this.yspeed -= this.gravity * dt;\r\n        }\r\n        \r\n        //如果xSpeed超过最大速度，则设置为最大速度\r\n        if(Math.abs(this.xspeed) > this.maxMoveSpeed ){\r\n            //console.log('max speed!')\r\n            //速度是矢量，所以要判断正负\r\n            this.xspeed = this.maxMoveSpeed * Math.abs(this.xspeed)/this.xspeed;\r\n        }\r\n        \r\n        //更新Hero的位置(在屏幕范围内)\r\n        this.node.x +=this.xspeed*dt;\r\n        if(this.jumping){\r\n            this.node.y += this.yspeed * dt;\r\n            if(this.node.getPositionY() < -283){\r\n                this.yspeed = 0;\r\n                this.node.setPositionY(-282);\r\n                this.jumping = false;\r\n            }\r\n        }\r\n            \r\n        //检测是否有初速度\r\n        if(this.xspeed != 0)\r\n            //console.log('moving!')\r\n        \r\n        //如果超过屏幕边界      \r\n        if(this.node.x > 545){\r\n            //控制台信息\r\n            //console.log('over the line(right)');\r\n            //停止奔跑动画\r\n            //this.animate.pause('hero-run');\r\n            //重定位位置\r\n            this.node.x = -541;\r\n            //重设初速度为0\r\n            //this.xspeed = 0;\r\n        }\r\n        else if(this.node.x < -541){\r\n           //console.log('over the line(left)');\r\n           //this.animate.pause('hero-run');\r\n           this.node.x = 545;   \r\n           //this.xspeed = 0;\r\n        }\r\n    },\r\n    \r\n});\r\n"
  ]
}